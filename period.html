<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Date Calculator</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: 40px auto; line-height: 1.6; }
    label, input { display: block; margin: 10px 0; }
    input[type="date"], input[type="number"] { width: 100%; padding: 8px; }
    .result { margin-top: 20px; padding: 10px; background: #f2f2f2; border-radius: 5px; }
  </style>
</head>
<body>

  <h1>ğŸ“… ê¸°ê°„ì œ ë‚ ì§œ ê³„ì‚°ê¸°</h1>

  <label>ğŸŸ¡ ìµœëŒ€ ì‚¬ìš© ê°€ëŠ¥ ê¸°ê°„ (ê°œì›”): <input type="number" id="duration" /></label>
  <label>ğŸŸ¢ ì‹œì‘ì¼ì (ì„ íƒ): <input type="date" id="startDate" /></label>
  <label>ğŸ”´ ì¢…ë£Œì¼ì (ì„ íƒ): <input type="date" id="endDate" /></label>
  <label>ğŸŸ£ êµ¬ë§¤ì¼ì: <input type="date" id="purchaseDate" /></label>

  <button onclick="calculateDates()">ê³„ì‚°í•˜ê¸°</button>

  <div class="result">
    <p><strong>ì‹¤ì œ ì‹œì‘ ê°€ëŠ¥ì¼ì (E1):</strong> <span id="realStartDate">-</span></p>
    <p><strong>ì‹¤ì œ ì¢…ë£Œ ê°€ëŠ¥ì¼ì (F1):</strong> <span id="realEndDate">-</span></p>
  </div>

  <script>
    function calculateDates() {
      const duration = document.getElementById("duration").value;
      const startInput = document.getElementById("startDate").value;
      const endInput = document.getElementById("endDate").value;
      const purchaseInput = document.getElementById("purchaseDate").value;

      // ë‚ ì§œ íŒŒì‹±
      const purchaseDate = purchaseInput ? new Date(purchaseInput) : null;
      const startDate = startInput ? new Date(startInput) : null;
      const endDate = endInput ? new Date(endInput) : null;

      // ì‹¤ì œ ì‹œì‘ ê°€ëŠ¥ì¼ì
      const realStart = startDate || purchaseDate;

      // ì‹¤ì œ ì¢…ë£Œ ê°€ëŠ¥ì¼ì ê³„ì‚°
      let realEnd = null;
      if (!duration) {
        realEnd = endDate;
      } else {
        const temp = new Date(realStart);
        temp.setMonth(temp.getMonth() + parseInt(duration));
        realEnd = endDate ? (temp < endDate ? temp : endDate) : temp;
      }

      // ê²°ê³¼ ì¶œë ¥
      const fmt = d => d ? d.toISOString().split('T')[0] : "-";
      document.getElementById("realStartDate").textContent = fmt(realStart);
      document.getElementById("realEndDate").textContent = fmt(realEnd);
    }
  </script>

</body>
</html>
